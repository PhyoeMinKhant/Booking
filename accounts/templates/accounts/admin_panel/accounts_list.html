{% extends 'accounts/admin_panel/base.html' %}

{% block title %}Accounts{% endblock %}

{% block content %}
  <header class="page-header page-header--row">
    <div>
      <h2>Accounts</h2>
      <p>Manage user accounts and profiles</p>
    </div>
    <a class="btn btn-primary" href="{% url 'panel_account_create' %}">New Account</a>
  </header>

  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Email</th>
          <th>Type</th>
          <th>Staff</th>
          <th>Active</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.profile.get_account_type_display }}</td>
            <td>{% if user.is_staff %}Yes{% else %}No{% endif %}</td>
            <td>{% if user.is_active %}Yes{% else %}No{% endif %}</td>
            <td class="actions-cell">
              <a class="btn btn-small" href="{% url 'panel_account_edit' user.id %}">Edit</a>
              {% if user.id != request.user.id %}
                <form method="post" action="{% url 'panel_account_delete' user.id %}">
                  {% csrf_token %}
                  <button class="btn btn-small btn-danger" type="submit">Delete</button>
                </form>
              {% endif %}
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="7">No accounts found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
